!function(o){function e(s){if(n[s])return n[s].exports;var t=n[s]={exports:{},id:s,loaded:!1};return o[s].call(t.exports,t,t.exports,e),t.loaded=!0,t.exports}var n={};return e.m=o,e.c=n,e.p="/app/dist/",e(0)}({0:function(o,e,n){n(35),n(10)},10:function(o,e){},35:function(o,e){"use strict";angular.module("modifyLoginPwd.ctrl",["app.directive"]).controller("modifyLoginPwdCtrl",["$scope","$rootScope","appService",function(o,e,n){o.modifyParams={token:sessionStorage.mobileUniCode||"",oldPwd:"",newPwd:""},o.params={imgCode:"",funcCode:"editLoginPwd"},o.checkParams={smsCode:""},o.sendCodeUrl="account/sms/sendCaptcha.do",o.checkMobileUniCode=function(e){if(!o.params.imgCode)return void n.popup("请输入图形验证码");if(!o.checkParams.smsCode)return void n.popup("请输入短信验证码");if(!sessionStorage.mobileUniCode)return void n.popup("请先获取短信验证码");if(sessionStorage.token)e();else{o.checkParams.mobileUniCode=sessionStorage.mobileUniCode;var s="account/sms/check.do";n.post(s,o.checkParams,{tokenId:sessionStorage.tokenId},function(o){sessionStorage.token=o.body,e&&"function"==typeof e&&e()},function(o){n.popup(o.msg)},!0)}},o.modifyLoginPwd=function(){if(!o.modifyParams.oldPwd||!o.modifyParams.newPwd)return void n.popup("请输入密码");if(o.modifyParams.oldPwd!=o.modifyParams.newPwd)return void n.popup("两次密码输入不一致");o.modifyParams.token=sessionStorage.token;var e="account/fundAccount/initLoginPwd.do";n.post(e,o.modifyParams,{tokenId:sessionStorage.tokenId},function(o){n.popup("密码修改成功！",null,appRuler.closePage),sessionStorage.removeItem("mobileUniCode"),sessionStorage.removeItem("token")},function(o){n.popup(o.msg)},!0)},o.userInfo=null,o.sendSuccess=!1,o.getUserInfo=function(){var e="account/customerinfo/loadUserDetail.do";n.post(e,{},{tokenId:sessionStorage.tokenId},function(e){o.userInfo=e},function(o){n.popup(o.msg)},!0)},appRuler.getUserInfo(function(e){sessionStorage.tokenId=e.tokenId,o.getUserInfo()})}])}});